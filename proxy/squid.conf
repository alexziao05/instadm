# squid.conf

# Define which SSL/HTTPS ports weâ€™ll allow
acl SSL_ports port 443
acl Safe_ports port 80          # http
acl Safe_ports port 443         # https
acl Safe_ports port 3128        # squid itself

# Allow CONNECT only to SSL_ports
acl CONNECT method CONNECT

# Define your Docker subnet (adjust if different)
acl localnet src 172.20.0.0/16  # or 172.18.0.0/16, etc.

# Only allow requests from inside your Docker network & localhost
http_access allow localhost
http_access allow localnet

# And make sure safe ports and CONNECT are allowed
http_access allow Safe_ports
http_access allow CONNECT

# Block everything else
http_access deny all

# Listen on port 3128
http_port 3128
